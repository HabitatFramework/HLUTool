<Window x:Class="HLU.WindowMain"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:hlu="clr-namespace:HLU.UI.UserControls;assembly="
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tkit="http://schemas.microsoft.com/wpf/2008/toolkit"
        xmlns:diag="clr-namespace:System.Diagnostics;assembly=WindowsBase"
        Title="{Binding WindowTitle}"
        Width="{Binding WindowWidth,
                         Mode=TwoWay}"
        Height="{Binding WindowHeight,
                         Mode=TwoWay}"
        Icon="..\..\Icons\HLUIcon.png"
        KeyUp="Window_KeyUp"
        KeyDown="Window_KeyDown"
        Loaded="Window_Loaded"
        Closing="OnClosing"
        Topmost="{Binding ElementName=MenuItemAppKeepOnTop,
                          Path=IsChecked}"
        WindowStyle="SingleBorderWindow">
    <!--  SizeToContent="Height"  -->
    <!--  Style="{DynamicResource WindowStyle}"  -->

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Dictionary\CodeDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\CodeNameDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\VagueDateConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\ErrorMessageConverterDictionary.xaml" />
                <!--  <ResourceDictionary Source="Dictionary/ThemeDarkGrey.xaml"/>  -->
                <!--  <ResourceDictionary Source="Dictionary/ThemeLightGrey.xaml"/>  -->
                <!--  <ResourceDictionary Source="Dictionary\Bool2VisibilityConverterDictionary.xaml" />  -->
                <!--  <ResourceDictionary Source="Dictionary\Bool2CollapsedConverterDictionary.xaml" />  -->
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <DockPanel Width="Auto"
               Margin="0,0,0,0"
               HorizontalAlignment="Stretch"
               VerticalAlignment="Stretch"
               Cursor="{Binding WindowCursor}">

        <Menu Name="MenuBar" DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem x:Name="MenuItemExport"
                          Command="{Binding ExportCommand}"
                          Header="Ex_port..."
                          IsEnabled="{Binding CanExport}" />
                <Separator />
                <MenuItem x:Name="MenuItemExit"
                          Command="{Binding CloseCommand}"
                          Header="E_xit" />
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem x:Name="MenuItemEdit"
                          Command="{Binding CopyCommand}"
                          Header="_Copy"
                          IsEnabled="{Binding CanCopy}" />
                <MenuItem x:Name="MenuItemPaste"
                          Command="{Binding PasteCommand}"
                          Header="Paste"
                          IsEnabled="{Binding CanPaste}" />
                <Separator />
                <MenuItem x:Name="MenuItemOSMMAccept"
                          Command="{Binding OSMMUpdateAcceptCommandMenu}"
                          Header="Accept OSMM Update"
                          IsEnabled="{Binding CanOSMMUpdateAccept}" />
                <MenuItem x:Name="MenuItemOSMMReject"
                          Command="{Binding OSMMUpdateRejectCommandMenu}"
                          Header="Reject OSMM Update"
                          IsEnabled="{Binding CanOSMMUpdateReject}" />
                <Separator />
                <MenuItem x:Name="MenuItemOSMMUpdate"
                          Command="{Binding OSMMUpdateCommandMenu}"
                          Header="{Binding OSMMUpdateCommandHeader}"
                          IsEnabled="{Binding CanOSMMUpdateMode}" />
                <MenuItem x:Name="MenuItemOSMMBulkUpdate"
                          Command="{Binding OSMMBulkUpdateCommandMenu}"
                          Header="{Binding OSMMBulkUpdateCommandHeader}"
                          IsEnabled="{Binding CanOSMMBulkUpdateMode}" />
                <Separator />
                <MenuItem x:Name="MenuItemBulkUpdate"
                          Command="{Binding BulkUpdateCommandMenu}"
                          Header="{Binding BulkUpdateCommandHeader}"
                          IsEnabled="{Binding CanBulkUpdateMode}" />
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem x:Name="MenuItemGisSideBySide"
                          Command="{Binding GisWinSideBySideCommand}"
                          Header="Windows _Side By Side"
                          IsEnabled="{Binding CanGisWinSideBySide}" />
                <MenuItem x:Name="MenuItemResetToolWindow"
                          Command="{Binding ResetToolWindowCommand}"
                          Header="Reset Tool Window Size"
                          IsEnabled="{Binding CanResetToolWindow}" />
                <MenuItem x:Name="MenuItemGisSwitchTo"
                          Command="{Binding GisWinSwitchToCommand}"
                          Header="S_witch To GIS Window"
                          IsEnabled="{Binding CanGisWinSwitchTo}" />
                <Separator />
                <MenuItem x:Name="MenuItemAppKeepOnTop"
                          Command="{Binding AppKeepOnTopCommand}"
                          Header="_Keep Tool Window on Top"
                          IsCheckable="True" />
                <MenuItem x:Name="MenuItemAutoZoomSelected" Header="Auto _Zoom To Selection">
                    <MenuItem Name="ZoomOff"
                              Click="MenuItem_Zoom_Click"
							  Command="{Binding AutoZoomSelectedOffCommand}"
                              Header="Off"
                              IsCheckable="True" />
                    <MenuItem Name="ZoomWhen"
                              Click="MenuItem_Zoom_Click"
							  Command="{Binding AutoZoomSelectedWhenCommand}"
                              Header="When out of view"
                              IsCheckable="True" />
                    <MenuItem Name="ZoomAlways"
                              Click="MenuItem_Zoom_Click"
							  Command="{Binding AutoZoomSelectedAlwaysCommand}"
                              Header="Always"
                              IsCheckable="True" />
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Select">
                <MenuItem x:Name="MenuItemFilterByAttributes"
                          Command="{Binding FilterByAttributesCommand}"
                          Header="Filter by _Attributes..."
                          IsEnabled="{Binding CanFilterByAttributes}" />
                <MenuItem x:Name="MenuItemAdvancedFilterByAttributes"
                          Command="{Binding FilterByAttributesAdvancedCommand}"
                          Header="Filter by _Attributes - Advanced..."
                          IsEnabled="{Binding CanFilterByAttributesAdvanced}"
						  Visibility="{Binding ShowInOSMMUpdateMode}" />
                <MenuItem x:Name="MenuItemFilterByIncid"
                          Command="{Binding FilterByIncidCommand}"
                          Header="Filter by _Incid..."
                          IsEnabled="{Binding CanFilterByIncid}" />
                <MenuItem x:Name="MenuItemClearFilter"
                          Command="{Binding ClearFilterCommand}"
                          Header="_Clear Filter"
                          IsEnabled="{Binding IsFiltered}" />
                <Separator />
                <MenuItem x:Name="MenuItemSelectOnMap"
                          Command="{Binding SelectOnMapCommand}"
                          Header="Select C_urrent INCID on Map"
                          IsEnabled="{Binding CanSelectOnMap}" />
                <MenuItem x:Name="MenuItemSelectAllOnMap"
                          Command="{Binding SelectAllOnMapCommand}"
                          Header="Select _All Filtered INCIDs on Map"
                          IsEnabled="{Binding IsFiltered}" />
                <MenuItem x:Name="MenuItemGetMapSelection"
                          Command="{Binding ReadMapSelectionCommand}"
                          Header="Get _Map Selection"
                          IsEnabled="{Binding CanReadMapSelection}" />
                <Separator />
                <MenuItem x:Name="MenuItemAutoSelectOnGis"
                          Command="{Binding AutoSelectOnGisCommand}"
                          Header="_Auto Select INCID on GIS"
                          IsCheckable="True" />
                <!--
                    <MenuItem x:Name="MenuItemSelectByIncid"
                    Command="{Binding SelectByIncidCommand}"
                    Header="Select by _INCID"
                    IsEnabled="{Binding CanSelectByIncid}" />
                -->
            </MenuItem>
            <MenuItem Header="Split/_Merge">
                <MenuItem x:Name="MenuItemLogicalSplit"
                          Command="{Binding Path=LogicalSplitCommand}"
                          Header="Logical _Split"
                          IsEnabled="{Binding Path=CanLogicallySplit}" />
                <MenuItem x:Name="MenuItemLogicalMerge"
                          Command="{Binding Path=LogicalMergeCommand}"
                          Header="_Logical Merge"
                          IsEnabled="{Binding Path=CanLogicallyMerge}" />
                <Separator />
                <MenuItem x:Name="MenuItemPhysicalSplit"
                          Command="{Binding Path=PhysicalSplitCommand}"
                          Header="Physical Spli_t"
                          IsEnabled="{Binding Path=CanPhysicallySplit}" />
                <MenuItem x:Name="MenuItemPhysicalMerge"
                          Command="{Binding Path=PhysicalMergeCommand}"
                          Header="_Physical Merge"
                          IsEnabled="{Binding Path=CanPhysicallyMerge}" />
            </MenuItem>
            <MenuItem Name="MenuItemTools" Header="_Tools">
                <MenuItem x:Name="MenuItemOptions"
                          Command="{Binding Path=OptionsCommand}"
                          Header="_Options..." />
                <MenuItem x:Name="MenuItemSwitchGisLayer"
                          Command="{Binding Path=SwitchGISLayerCommand}"
                          IsEnabled="{Binding Path=CanSwitchGISLayer}"
                          Header="Switch _GIS Layer" />
                <Separator />
                <MenuItem x:Name="MenuItemStyles" Header="_Styles">
                    <MenuItem Name="Original"
                              Click="MenuItem_Style_Click"
                              Header="Original"
                              IsCheckable="True" />
                    <MenuItem Name="LightGrey"
                              Click="MenuItem_Style_Click"
                              Header="_Light Grey"
                              IsCheckable="True" />
                    <MenuItem Name="DarkGrey"
                              Click="MenuItem_Style_Click"
                              Header="_Dark Grey"
                              IsCheckable="True" />
                    <MenuItem Name="ShinyBlue"
                              Click="MenuItem_Style_Click"
                              Header="Shiny _Blue"
                              IsCheckable="True" />
                </MenuItem>
                <Separator />
                <MenuItem x:Name="MenuItemAbout"
                          Command="{Binding Path=AboutCommand}"
                          Header="_About" />
            </MenuItem>
        </Menu>

        <ToolBarTray x:Name="ToolBarTrayMain" DockPanel.Dock="Top">
            <ToolBar x:Name="ToolBarMain"
                     Band="1"
                     BandIndex="1">
                <Button Name="ButtonExit"
                        Command="{Binding Path=CloseCommand}"
                        ToolTip="Exit"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\FileExit.png" />
                </Button>
                <!--
                <Button Name="ButtonExport"
                    Command="{Binding Path=ExportCommand}"
                    IsEnabled="{Binding Path=CanExport}"
                    ToolTip="Export"
                    ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                    Height="16"
                    Source="..\..\Icons\FileExport.png" />
                </Button>
                -->
                <Button x:Name="ButtonCopy"
                        Command="{Binding CopyCommand}"
                        IsEnabled="{Binding CanCopy}"
                        ToolTip="Copy"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\EditCopy.png" />
                </Button>
                <Button x:Name="ButtonPaste"
                        Command="{Binding PasteCommand}"
                        IsEnabled="{Binding CanPaste}"
                        ToolTip="Paste"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\EditPaste.png" />
                </Button>
                <!--
                    <Button Name="ButtonBulkUpdate"
                    Command="{Binding Path=BulkUpdateCommand}"
                    IsEnabled="{Binding Path=CanBulkUpdateMode}"
                    ToolTip="Bulk Update"
                    ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                    Height="16"
                    Source="..\..\Icons\EditBulkUpdate.png" />
                    </Button>
                -->
            </ToolBar>
            <ToolBar x:Name="ToolBarView"
                     Band="1"
                     BandIndex="2">
                <Button Name="ButtonGisSideBySide"
                        Command="{Binding Path=GisWinSideBySideCommand}"
                        IsEnabled="{Binding Path=CanGisWinSideBySide}"
                        ToolTip="Windows Side By Side"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\GisWinSideBySide.png" />
                </Button>
                <!--
                    <Button Name="ButtonGisSwitchTo"
                    Command="{Binding Path=GisWinSwitchToCommand}"
                    IsEnabled="{Binding Path=CanGisWinSwitchTo}"
                    ToolTip="Switch To GIS Window"
                    ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                    Height="16"
                    Source="..\..\Icons\GisWinSwitchTo.png" />
                    </Button>
                -->
                <Button x:Name="ButtonZoomSelected"
                        Command="{Binding ZoomSelectionCommand}"
                        IsEnabled="{Binding CanZoomSelection}"
                        ToolTip="Zoom to Selection"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\ZoomSelection.png" />
                </Button>
            </ToolBar>
            <ToolBar x:Name="ToolBarSelect"
                     Band="1"
                     BandIndex="3">
                <Button x:Name="ButtonFilterByAttributes"
                        Command="{Binding FilterByAttributesCommand}"
                        IsEnabled="{Binding CanFilterByAttributes}"
                        ToolTip="Filter by Attributes"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\FilterByAttributes.png" />
                </Button>
                <Button x:Name="ButtonClearFilter"
                        Command="{Binding ClearFilterCommand}"
                        IsEnabled="{Binding CanClearFilter}"
                        ToolTip="Clear Filter"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\ClearFilter.png" />
                </Button>
                <Button x:Name="ButtonSelectOnMap"
                        Command="{Binding SelectOnMapCommand}"
                        IsEnabled="{Binding CanSelectOnMap}"
                        ToolTip="Select Current INCID on Map"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SelectOnMap.png" />
                </Button>
                <Button x:Name="ButtonSelectAllOnMap"
                        Command="{Binding SelectAllOnMapCommand}"
                        IsEnabled="{Binding CanSelectOnMap}"
                        ToolTip="Select All Filtered INCIDs on Map"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SelectAllOnMap.png" />
                </Button>
                <Button x:Name="ButtonGetMapSelection"
                        Command="{Binding ReadMapSelectionCommand}"
                        IsEnabled="{Binding CanReadMapSelection}"
                        ToolTip="Get Map Selection"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\ReadMapSelection.png" />
                </Button>
                <!--
                    <Button x:Name="ButtonSelectByIncid"
                    Command="{Binding SelectByIncidCommand}"
                    IsEnabled="{Binding CanSelectByIncid}"
                    ToolTip="Select by INCID"
                    ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                    Height="16"
                    Source="..\..\Icons\SelectByIncid.png" />
                    </Button>
                -->
            </ToolBar>
            <ToolBar x:Name="ToolBarSplitMerge"
                     Band="1"
                     BandIndex="4">
                <Button Name="ButtonLogicalSplit"
                        Command="{Binding Path=LogicalSplitCommand}"
                        IsEnabled="{Binding Path=CanLogicallySplit}"
                        ToolTip="Logical Split"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\LogicalSplit.png" />
                </Button>
                <Button Name="ButtonLogicalMerge"
                        Command="{Binding Path=LogicalMergeCommand}"
                        IsEnabled="{Binding Path=CanLogicallyMerge}"
                        ToolTip="Logical Merge"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\LogicalMerge.png" />
                </Button>
                <Button Name="ButtonPhysicalSplit"
                        Command="{Binding Path=PhysicalSplitCommand}"
                        IsEnabled="{Binding Path=CanPhysicallySplit}"
                        ToolTip="Physical Split"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\PhysicalSplit.png" />
                </Button>
                <Button Name="ButtonPhysicalMerge"
                        Command="{Binding Path=PhysicalMergeCommand}"
                        IsEnabled="{Binding Path=CanPhysicallyMerge}"
                        ToolTip="Physical Merge"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\PhysicalMerge.png" />
                </Button>
            </ToolBar>
            <ToolBar x:Name="ToolBarTools"
                     Band="1"
                     BandIndex="5">
                <Button x:Name="ButtonOptions"
                        Command="{Binding OptionsCommand}"
                        ToolTip="Options"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\Options.png" />
                </Button>
                <Button x:Name="ButtonSwitchGISLayer"
                        Command="{Binding Path=SwitchGISLayerCommand}"
                        IsEnabled="{Binding Path=CanSwitchGISLayer}"
                        ToolTip="Switch GIS Layer"
                        ToolTipService.ShowOnDisabled="True">
                    <Image Width="16"
                           Height="16"
                           Source="..\..\Icons\SwitchGISLayer.png" />
                </Button>
            </ToolBar>
        </ToolBarTray>

        <Grid x:Name="GridMain" Margin="4,2,4,4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  GroupBoxTopControlsBulkUpdate  -->
            <GroupBox x:Name="GroupBoxTopControlsBulkUpdate"
                      Grid.Row="2"
                      Grid.Column="0"
                      Header="{Binding Path=TopControlsBulkUpdateGroupHeader}"
                      Visibility="{Binding Path=ShowInBulkUpdateMode}">
                <Grid x:Name="GridTopControlsBulkUpdate"
                      Grid.Row="0"
                      Margin="0,4,0,0"
                      Panel.ZIndex="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Grid x:Name="GridBulkRecordCounts"
                          Grid.Row="0"
						  Grid.RowSpan="2"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Center">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="100"/>
                    </Grid.ColumnDefinitions>

                    <Label x:Name="LabelBulkUpdateStatusIncidDB"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Database INCIDs" />
                    <TextBox x:Name="TextBoxBulkUpdateStatusIncidDB"
                             Grid.Row="0"
                             Grid.Column="1"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumIncidSelectedDB,
                                            Mode=OneWay}"
                             TextAlignment="Left" />
                    <Label x:Name="LabelBulkUpdateStatusToidDB"
                           Grid.Row="1"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Database TOIDs" />
                    <TextBox x:Name="TextBoxBulkUpdateStatusToidDB"
                             Grid.Row="1"
                             Grid.Column="1"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumToidSelectedDB,
                                            Mode=OneWay}"
                             TextAlignment="Left" />
                    <Label x:Name="LabelBulkUpdateStatusFragDB"
                           Grid.Row="2"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Database Fragments" />
                    <TextBox x:Name="TextBoxBulkUpdateStatusFragDB"
                             Grid.Row="2"
                             Grid.Column="1"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumFragmentsSelectedDB,
                                            Mode=OneWay}"
                             TextAlignment="Left" />

                    <Label x:Name="LabelBulkUpdateStatusMap"
                           Grid.Row="0"
                           Grid.Column="2"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Map INCIDs" />
                    <TextBox x:Name="TextBoxBulkUpdateStatusIncidMap"
                             Grid.Row="0"
                             Grid.Column="3"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumIncidSelectedMap,
                                            Mode=OneWay,
											ValidatesOnDataErrors=True}"
							 TextAlignment="Left"
							 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
							 ToolTipService.ShowOnDisabled="True" />
                    <Label x:Name="LabelBulkUpdateStatusToidMap"
                           Grid.Row="1"
                           Grid.Column="2"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Map TOIDs" />
                    <TextBox x:Name="TextBoxBulkUpdateStatusToidMap"
                             Grid.Row="1"
                             Grid.Column="3"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumToidSelectedMap,
                                            Mode=OneWay,
											ValidatesOnDataErrors=True}"
                             TextAlignment="Left"
							 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
							 ToolTipService.ShowOnDisabled="True" />
                    <Label x:Name="LabelBulkUpdateStatusFragMap"
                           Grid.Row="2"
                           Grid.Column="2"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Map Fragments" />
                    <TextBox x:Name="TextBoxBulkUpdateStatusFragMap"
                             Grid.Row="2"
                             Grid.Column="3"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumFragmentsSelectedMap,
                                            Mode=OneWay,
											ValidatesOnDataErrors=True}"
                             TextAlignment="Left"
							 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
							 ToolTipService.ShowOnDisabled="True" />
                    </Grid>
                </Grid>
            </GroupBox>

            <!--  GroupBoxTopControls  -->
            <GroupBox x:Name="GroupBoxTopControls"
                      Grid.Row="2"
                      Grid.Column="0"
                      Header="{Binding Path=TopControlsGroupHeader}"
                      Visibility="{Binding Path=HideInBulkUpdateMode}">
                <Grid x:Name="GridTopControls"
                      Grid.Row="0"
                      Margin="0,4,0,0"
                      Panel.ZIndex="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" MinWidth="90" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Label x:Name="LabelIncid"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="INCID" />
                    <TextBox x:Name="TextBoxIncid"
                             Grid.Row="0"
                             Grid.Column="1"
                             Margin="8,0,4,4"
                             VerticalAlignment="Center"
                             IsReadOnly="True"
                             Text="{Binding Path=Incid,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}" />

                    <Grid x:Name="GridIncidAttributes"
                          Grid.Row="0"
                          Grid.Column="2"
                          Grid.ColumnSpan="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Label x:Name="LabelIncidArea"
                               Grid.Row="0"
                               Grid.Column="0"
                               Margin="12,0,0,4"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Content="Area [ha]" />
                        <TextBox x:Name="TextBoxIncidArea"
                                 Grid.Row="0"
                                 Grid.Column="1"
                                 Margin="8,0,8,4"
                                 VerticalAlignment="Center"
                                 IsEnabled="False"
                                 IsReadOnly="True"
                                 Text="{Binding IncidArea,
                                                Mode=OneWay,
                                                ValidatesOnDataErrors=False}"
                                 TextAlignment="Right" />
                        <Label x:Name="LabelIncidLength"
                               Grid.Row="0"
                               Grid.Column="2"
                               Margin="12,0,0,4"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Content="Length [km]" />
                        <TextBox x:Name="TextBoxIncidLength"
                                 Grid.Row="0"
                                 Grid.Column="3"
                                 Margin="8,0,8,4"
                                 VerticalAlignment="Center"
                                 IsEnabled="False"
                                 IsReadOnly="True"
                                 Text="{Binding IncidLength,
                                                Mode=OneWay,
                                                ValidatesOnDataErrors=False}"
                                 TextAlignment="Right" />
                    </Grid>

                    <Label x:Name="LabelIncidCreatedDate"
                           Grid.Row="1"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Created
                    </Label>
                    <TextBox x:Name="TextBoxIncidCreatedDate"
                             Grid.Row="1"
                             Grid.Column="1"
                             Margin="8,0,4,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidCreatedDate,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right" />

                    <Label x:Name="LabelIncidCreatedUser"
                           Grid.Row="1"
                           Grid.Column="2"
                           Margin="12,0,0,4"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center">
                        By
                    </Label>
                    <TextBox x:Name="TextBoxIncidCreatedUser"
                             Grid.Row="1"
                             Grid.Column="3"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidCreatedUser,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right" />

                    <Label x:Name="LabelIncidLastModDate"
                           Grid.Row="2"
                           Grid.Column="0"
                           Margin="8,0,0,2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Modified
                    </Label>
                    <TextBox x:Name="TextBoxIncidLastModDate"
                             Grid.Row="2"
                             Grid.Column="1"
                             Margin="8,0,4,2"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidLastModifiedDate,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right" />

                    <Label x:Name="LabelIncidLastModUser"
                           Grid.Row="2"
                           Grid.Column="2"
                           Margin="12,0,0,2"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center">
                        By
                    </Label>
                    <TextBox x:Name="TextBoxIncidLastModUser"
                             Grid.Row="2"
                             Grid.Column="3"
                             Margin="8,0,8,2"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidLastModifiedUser,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Right" />

                </Grid>
            </GroupBox>

            <!--  GroupBoxReasonProcess  -->
            <GroupBox x:Name="GroupBoxReasonProcess"
                      Grid.Row="0"
                      Margin="0,2,0,0"
                      Visibility="{Binding Path=ShowReasonProcessGroup}">
                <Grid x:Name="GridReasonProcess"
                      Grid.Row="1"
                      Margin="0,4,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Label x:Name="LabelReason"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="6,0,0,2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Reason" />
                    <ComboBox x:Name="ComboBoxReason"
                              Grid.Row="0"
                              Grid.Column="1"
                              Margin="8,2,8,2"
                              VerticalAlignment="Center"
                              DisplayMemberPath="description"
                              IsEditable="False"
                              IsEnabled="{Binding Path=ReasonProcessEnabled}"
                              IsReadOnly="False"
                              ItemsSource="{Binding ReasonCodes,
                                                    Mode=TwoWay,
                                                    UpdateSourceTrigger=PropertyChanged}"
                              SelectedValue="{Binding Reason,
                                                      ValidatesOnDataErrors=True}"
                              SelectedValuePath="code"
                              Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                              ToolTipService.ShowOnDisabled="True" />

                    <Label x:Name="LabelProcess"
                           Grid.Row="0"
                           Grid.Column="2"
                           Margin="6,0,0,2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Process" />
                    <ComboBox x:Name="ComboBoxProcess"
                              Grid.Row="0"
                              Grid.Column="3"
                              Margin="8,2,8,2"
                              VerticalAlignment="Center"
                              DisplayMemberPath="description"
                              IsEditable="False"
                              IsEnabled="{Binding Path=ReasonProcessEnabled}"
                              IsReadOnly="False"
                              ItemsSource="{Binding ProcessCodes,
                                                    Mode=TwoWay,
                                                    UpdateSourceTrigger=PropertyChanged}"
                              SelectedValue="{Binding Process,
                                                      ValidatesOnDataErrors=True}"
                              SelectedValuePath="code"
                              Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                              ToolTipService.ShowOnDisabled="True" />
                </Grid>
            </GroupBox>

            <!--  GroupBoxOSMMPending  -->
            <GroupBox x:Name="GroupBoxOSMMPending"
            		  Grid.Row="1"
                      Margin="0,2,0,0"
            		  IsHitTestVisible="True" Header="OSMM Updates"
       				  Visibility="{Binding ShowIncidOSMMPendingGroup}">
            	<Grid x:Name="GridOSMMPending"
            		  Grid.Row="0"
            		  Margin="0,4,0,0">
            		<Grid.RowDefinitions>
            			<RowDefinition Height="Auto" />
            			<RowDefinition Height="Auto" />
            		</Grid.RowDefinitions>

            		<Grid Margin="0" Grid.Row="0">
            			<Grid.ColumnDefinitions>
            				<ColumnDefinition Width="Auto" MinWidth="75"/>
            				<ColumnDefinition Width="*" MinWidth="10"/>
            				<ColumnDefinition Width="Auto"/>
            				<ColumnDefinition Width="*" MinWidth="10"/>
            				<ColumnDefinition Width="Auto"/>
            				<ColumnDefinition Width="*" MinWidth="10"/>
            				<ColumnDefinition Width="Auto"/>
            				<ColumnDefinition Width="*" MinWidth="90"/>
            			</Grid.ColumnDefinitions>
            			<Label x:Name="LabelOSMMProcessFlag"
						    Grid.Column="0"
            				Margin="0,0,0,4"
            				HorizontalAlignment="Right"
            				VerticalAlignment="Center"
            				Content="Process">
            			</Label>
            			<TextBox x:Name="TextBoxOSMMProcessFlag"
						    Grid.Column="1"
            				Margin="8,0,8,4"
            				VerticalAlignment="Center"
            				IsEnabled="False"
            				IsReadOnly="True"
            				TextAlignment="Right"
                            Text="{Binding IncidOSMMProcessFlag,
                                  Mode=OneWay,
                                  ValidatesOnDataErrors=False}" />
            			<Label x:Name="LabelOSMMChangeFlag"
						    Grid.Column="2"
            				Margin="0,0,0,4"
            				HorizontalAlignment="Right"
            				VerticalAlignment="Center"
            				Content="Change">
            			</Label>
            			<TextBox x:Name="TextBoxOSMMChangeFlag"
						    Grid.Column="3"
            				Margin="8,0,8,4"
            				VerticalAlignment="Center"
            				IsEnabled="False"
            				IsReadOnly="True"
            				TextAlignment="Right"
                            Text="{Binding IncidOSMMChangeFlag,
                                  Mode=OneWay,
                                  ValidatesOnDataErrors=False}" />
            			<Label x:Name="LabelOSMMSpatialFlag"
						    Grid.Column="4"
            				Margin="0,0,0,4"
            				HorizontalAlignment="Right"
            				VerticalAlignment="Center"
            				Content="Spatial">
            			</Label>
            			<TextBox x:Name="TextBoxOSMMSpatialFlag"
						    Grid.Column="5"
            				Margin="8,0,8,4"
            				VerticalAlignment="Center"
            				IsEnabled="False"
            				IsReadOnly="True"
            				TextAlignment="Right"
                            Text="{Binding IncidOSMMSpatialFlag,
                                  Mode=OneWay,
                                  ValidatesOnDataErrors=False}" />
            			<Label x:Name="LabelOSMMStatus"
							Grid.Column="6"
            				Margin="0,0,0,4"
            				HorizontalAlignment="Right"
            				VerticalAlignment="Center"
            				Content="Status">
            			</Label>
            			<TextBox x:Name="TextBoxOSMMStatus"
							Grid.Column="7"
            				Margin="8,0,8,4"
            				VerticalAlignment="Center"
            				IsEnabled="False"
            				IsReadOnly="True"
            				TextAlignment="Left"
							Text="{Binding IncidOSMMUpdateStatus,
								  Mode=OneWay,
								  ValidatesOnDataErrors=True}"
							Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
							ToolTipService.ShowOnDisabled="True" />
            		</Grid>

            		<Grid Margin="0" Grid.Row="1">
            			<Grid.ColumnDefinitions>
            				<ColumnDefinition Width="Auto" MinWidth="75"/>
            				<ColumnDefinition MinWidth="100"/>
            				<ColumnDefinition Width="Auto" MinWidth="40" />
            				<ColumnDefinition Width="55"/>
            			</Grid.ColumnDefinitions>
            			<Label x:Name="LabelOSMMIhsSummary"
							Grid.Column="0"
            				Margin="0,0,0,2"
            				HorizontalAlignment="Right"
            				VerticalAlignment="Center"
            				Content="IHS Summary">
            			</Label>
            			<TextBox x:Name="TextBoxOSMMIhsSummary"
							Grid.Column="1"
            				Margin="8,0,8,2"
            				VerticalAlignment="Center"
            				IsEnabled="False"
            				IsReadOnly="True"
            				TextAlignment="Left"
							Text="{Binding IncidOSMMIhsSummary,
								  Mode=OneWay,
								  ValidatesOnDataErrors=False}" />
            			<Label x:Name="LabelOSMMXRefID"
							Grid.Column="2"
            				Margin="0,0,0,2"
            				HorizontalAlignment="Right"
            				VerticalAlignment="Center"
            				Content="XRef ID">
            			</Label>
            			<TextBox x:Name="TextBoxOSMMXRefID"
							Grid.Column="3"
            				Margin="8,0,8,2"
            				VerticalAlignment="Center"
            				IsEnabled="False"
            				IsReadOnly="True"
            				TextAlignment="Left"
							Text="{Binding IncidOSMMXRefID,
								  Mode=OneWay,
								  ValidatesOnDataErrors=False}" />
            		</Grid>
            	</Grid>
            </GroupBox>

            <!--  TabControlData  -->
            <TabControl x:Name="TabControlData"
                        Grid.Row="3"
                        Grid.Column="0"
                        Margin="0,2,0,0"
                        IsEnabled="{Binding TabControlDataEnabled}"
						SelectedIndex="{Binding TabItemSelected, Mode=TwoWay}">
                <!--  TabItemIhs  -->

                <TabItem x:Name="TabItemIhs"
                         Height="29.29"
                         VerticalAlignment="Bottom"
                         IsEnabled="{Binding TabItemIhsEnabled}">

                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="IhsTabLabel"
                                   Margin="2,0,2,0"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding IhsTabLabel,
                                                     ValidatesOnDataErrors=True}"
                                   FontSize="13"
                                   Padding="4,2,4,4"
                                   Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>

                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemIhs">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="3.5*" MinHeight="11" />
                                    <RowDefinition Height="4*" MinHeight="11" />
                                    <RowDefinition Height="3*" MinHeight="8" />
                                    <RowDefinition Height="3*" MinHeight="8" />
                                    <RowDefinition Height="3*" MinHeight="8" />
                                    <RowDefinition Height="2.5*" MinHeight="6" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="19*" />
                                    <ColumnDefinition Width="439*" />
                                    <ColumnDefinition Width="6*" />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <!--  GroupBoxIhsCategories  -->
                                <GroupBox x:Name="GroupBoxIhsCategories"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsHabitatHeader}">
                                    <Grid x:Name="GridCategories" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelHabitatClass"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxHabitatClass"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="8,2,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding HabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding HabitatClass}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelHabitatType"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />
                                        <ComboBox x:Name="ComboBoxHabitatType"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding HabitatTypeEnabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelIhsHabitat"
                                               Grid.Row="2"
                                               Grid.Column="0"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="IHS Habitat" />
                                        <ComboBox x:Name="ComboBoxIhsHabitat"
                                                  Grid.Row="2"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsHabitatListEnabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsHabitatCodes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsHabitat,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsHabitat"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsHabitat,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelNvcCodes"
                                               Grid.Row="3"
                                               Grid.Column="0"
                                               Margin="0,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="NVC Codes"
                                               Visibility="{Binding Path=ShowNVCCodesText}" />
                                        <TextBox x:Name="TextBoxNvcCodes"
                                                 Grid.Row="3"
                                                 Grid.Column="1"
                                                 Margin="8,0,8,2"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="False"
                                                 Text="{Binding NvcCodes,
                                                                Mode=OneWay}"
                                                 Visibility="{Binding Path=ShowNVCCodesText}"
						                         ToolTip="{Binding NvcCodes}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsMatrix  -->
                                <GroupBox x:Name="GroupBoxIhsMatrix"
                                          Grid.Row="1"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsMatrixHeader}">
                                    <Grid x:Name="GridIhsMatrix" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsMatrix1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Matrix 1" />
                                        <ComboBox x:Name="ComboBoxIhsMatrix1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="8,2,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsMatrix1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsMatrix1Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsMatrix1,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsMatrix1"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,2,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsMatrix1,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsMatrix1Enabled,
                                                                      Mode=OneWay}" />

                                        <Label x:Name="LabelIhsMatrix2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Matrix 2" />
                                        <ComboBox x:Name="ComboBoxIhsMatrix2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsMatrix2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsMatrix2Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsMatrix2,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsMatrix2"
                                                  Grid.Row="1"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsMatrix2,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsMatrix2Enabled,
                                                                      Mode=OneWay}" />

                                        <Label x:Name="LabelIhsMatrix3"
                                               Grid.Row="2"
                                               Grid.Column="0"
                                               Margin="0,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Matrix 3" />
                                        <ComboBox x:Name="ComboBoxIhsMatrix3"
                                                  Grid.Row="2"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsMatrix3Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsMatrix3Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsMatrix3,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsMatrix3"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsMatrix3,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsMatrix3Enabled,
                                                                      Mode=OneWay}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsFormation  -->
                                <GroupBox x:Name="GroupBoxIhsFormation"
                                          Grid.Row="2"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsFormationHeader}">
                                    <Grid x:Name="GridIhsFormation" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsFormation1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Formation 1" />
                                        <ComboBox x:Name="ComboBoxIhsFormation1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="8,2,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsFormation1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsFormation1Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsFormation1,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsFormation1"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,2,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsFormation1,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsFormation1Enabled,
                                                                      Mode=OneWay}" />

                                        <Label x:Name="LabelIhsFormation2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Formation 2" />
                                        <ComboBox x:Name="ComboBoxIhsFormation2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsFormation2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsFormation2Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsFormation2,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsFormation2"
                                                  Grid.Row="1"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsFormation2,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsFormation2Enabled,
                                                                      Mode=OneWay}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsManagement  -->
                                <GroupBox x:Name="GroupBoxIhsManagement"
                                          Grid.Row="3"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsManagementHeader}">
                                    <Grid x:Name="GridIhsManagement" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsManagement1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Management 1" />
                                        <ComboBox x:Name="ComboBoxIhsManagement1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="8,2,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsManagement1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsManagement1Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  Padding="4,3"
                                                  SelectedValue="{Binding IncidIhsManagement1,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsManagement1"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,2,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsManagement1,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsManagement1Enabled,
                                                                      Mode=OneWay}" />

                                        <Label x:Name="LabelIhsManagement2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Management 2" />
                                        <ComboBox x:Name="ComboBoxIhsManagement2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsManagement2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsManagement2Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsManagement2,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsManagement2"
                                                  Grid.Row="1"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsManagement2,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsManagement2Enabled,
                                                                      Mode=OneWay}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsComplex  -->
                                <GroupBox x:Name="GroupBoxIhsComplex"
                                          Grid.Row="4"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsComplexHeader}">
                                    <Grid x:Name="GridIhsComplex" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsComplex1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Complex 1" />
                                        <ComboBox x:Name="ComboBoxIhsComplex1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="8,2,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsComplex1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsComplex1Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsComplex1,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsComplex1"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,2,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsComplex1,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsComplex1Enabled,
                                                                      Mode=OneWay}" />

                                        <Label x:Name="LabelIhsComplex2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Complex 2" />
                                        <ComboBox x:Name="ComboBoxIhsComplex2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  DropDownClosed="ComboBox_DropDownClosed"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IhsComplex2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding IhsComplex2Codes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidIhsComplex2,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIhsComplex2"
                                                  Grid.Row="1"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidIhsComplex2,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding IhsComplex2Enabled,
                                                                      Mode=OneWay}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsSummary  -->
                                <GroupBox x:Name="GroupBoxIhsSummary"
                                          Grid.Row="5"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          VerticalAlignment="Stretch">
                                          <!-- Margin="0" -->
                                    <!--  Header="Summary">  -->
                                    <Grid x:Name="GridSummary" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsSummary"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="IHS Summary" />
                                        <TextBox x:Name="TextBoxIhsSummary"
                                                 Grid.Row="0"
                                                 Grid.Column="1"
                                                 Margin="8,2,8,4"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="False"
                                                 IsReadOnly="True"
                                                 Text="{Binding IncidIhsSummary,
                                                                Mode=OneWay,
                                                                ValidatesOnDataErrors=False}" />
                                        <Label x:Name="LabelLegacyHabitat"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Legacy Habitat" />
                                        <ComboBox x:Name="ComboBoxLegacyHabitat"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="8,0,8,2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding LegacyHabitatCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidLegacyHabitat,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyLegacyHabitat"
                                                  Grid.Row="1"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidLegacyHabitat,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding ProcessEnabled,
                                                                      Mode=OneWay}" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>

                </TabItem>

                <!--  TabItemDetails  -->
                <TabItem x:Name="TabItemDetails"
				         IsEnabled="{Binding TabItemDetailsEnabled}">
					
                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="DetailsTabLabel"
                                   Margin="2,0,2,0"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding DetailsTabLabel,
                                                     ValidatesOnDataErrors=True}"
                                   FontSize="13"
                                   Padding="4,2,4,4"
                                   Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemDetails">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="4*" MinHeight="150" />
                                    <!--  Height="140"  -->
                                    <RowDefinition Height="3*" MinHeight="140" />
                                    <!--  Height="140"  -->
                                    <RowDefinition Height="2.5*" />
                                    <RowDefinition Height="1.5*" />
                                    <RowDefinition Height="2*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <!--  "130" />  -->
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <GroupBox x:Name="GroupBoxPrimaryBapHabitats"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="Priority Habitats">
                                    <Grid x:Name="GridBapHabitatsPrimary" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <!--  "130" />  -->
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="22" />
                                        </Grid.ColumnDefinitions>
                                        <tkit:DataGrid x:Name="DataGridPrimaryBapHabitats"
                                                       Grid.Row="0"
                                                       Grid.Column="0"
                                                       Grid.ColumnSpan="2"
                                                       Margin="4,2,6,2"
                                                       AutoGenerateColumns="False"
                                                       BorderBrush="Black"
                                                       BorderThickness="1"
                                                       CanUserAddRows="False"
                                                       CanUserDeleteRows="False"
                                                       CanUserReorderColumns="False"
                                                       CanUserResizeColumns="True"
                                                       CanUserSortColumns="True"
                                                       HeadersVisibility="All"
                                                       IsEnabled="{Binding BapHabitatsAutoEnabled}"
                                                       ItemsSource="{Binding IncidBapHabitatsAuto}"
                                                       MinRowHeight="24"
                                                       Padding="2,0"
                                                       RowDetailsVisibilityMode="Visible"
                                                       RowHeaderWidth="20"
                                                       RowHeight="24">
                                            <tkit:DataGrid.RowValidationRules>
                                                <DataErrorValidationRule />
                                            </tkit:DataGrid.RowValidationRules>
                                            <tkit:DataGrid.Columns>
                                                <tkit:DataGridTextColumn Binding="{Binding bap_id}"
                                                                         Header="bap_id"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <tkit:DataGridTextColumn Binding="{Binding incid}"
                                                                         Header="INCID"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <hlu:DataGridComboBoxColumnWithBinding Width="SizeToHeader"
                                                                                       MinWidth="175"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       EditingElementStyle="{DynamicResource ComboBoxStyle}"
                                                                                       Header="Habitat"
                                                                                       IsReadOnly="True"
                                                                                       ItemsSource="{Binding DataContext.BapHabitatCodes,
                                                                                                             IsAsync=true,
                                                                                                             RelativeSource={RelativeSource AncestorType={x:Type Window},
                                                                                                                                            Mode=FindAncestor}}"
                                                                                       SelectedValueBinding="{Binding bap_habitat,
                                                                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                                                       SelectedValuePath="code" />
                                                <hlu:DataGridComboBoxColumnWithBinding Width="SizeToHeader"
                                                                                       MinWidth="100"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       EditingElementStyle="{DynamicResource ComboBoxStyle}"
                                                                                       Header="Determ. Quality"
                                                                                       ItemsSource="{Binding DataContext.BapDeterminationQualityCodesAuto,
                                                                                                             IsAsync=true,
                                                                                                             RelativeSource={RelativeSource AncestorType={x:Type Window},
                                                                                                                                            Mode=FindAncestor}}"
                                                                                       SelectedValueBinding="{Binding quality_determination,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code" />
                                                <hlu:DataGridComboBoxColumnWithBinding Width="SizeToHeader"
                                                                                       MinWidth="90"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       EditingElementStyle="{DynamicResource ComboBoxStyle}"
                                                                                       Header="Interp. Quality"
                                                                                       ItemsSource="{Binding DataContext.BapInterpretationQualityCodes,
                                                                                                             IsAsync=true,
                                                                                                             RelativeSource={RelativeSource AncestorType={x:Type Window},
                                                                                                                                            Mode=FindAncestor}}"
                                                                                       SelectedValueBinding="{Binding quality_interpretation,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code" />
                                                <tkit:DataGridTextColumn Width="SizeToHeader"
                                                                         MinWidth="150"
                                                                         Binding="{Binding interpretation_comments,
                                                                                           UpdateSourceTrigger=PropertyChanged,
                                                                                           ValidatesOnDataErrors=True}"
                                                                         CanUserResize="True"
                                                                         EditingElementStyle="{DynamicResource TextBoxStyle}"
                                                                         Header="Interp. Comments" />
                                            </tkit:DataGrid.Columns>
											<!--
                                            <tkit:DataGrid.RowDetailsTemplate>
                                            <DataTemplate>
												<StackPanel>
													<TextBlock Text="{Binding bap_habitat}" />
													<TextBlock Text="{Binding quality_determination}" />
													<TextBlock Text="{Binding quality_interpretation}" />
													<TextBlock Text="{Binding interpretation_comments}" />
												</StackPanel>
                                            </DataTemplate>
                                            </tkit:DataGrid.RowDetailsTemplate>
											-->
                                            <!--
                                                <tkit:DataGrid.RowDetailsTemplate>
                                                <DataTemplate>
                                                <Grid TextBlock.Foreground="Black">
                                                <Grid.RowDefinitions>
                                                <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <TextBlock Text="{Binding interpretation_comments}" Grid.Row="0"/>
                                                </Grid>
                                                </DataTemplate>
                                                </tkit:DataGrid.RowDetailsTemplate>
                                            -->
                                        </tkit:DataGrid>

										<!--  ButtonEditPriorityHabitats  -->
										<Button x:Name="ButtonEditPriorityHabitats"
												Grid.Row="0"
												Grid.Column="2"
												Width="20"
												MaxHeight="20"
												Margin="0,5,0,0"
												HorizontalAlignment="Right"
												VerticalAlignment="Top"
												Command="{Binding EditPriorityHabitatsCommand}"
												IsEnabled="{Binding CanEditPriorityHabitats}"
												MouseEnter="ButtonEditPriorityHabitats_MouseEnter"
												MouseLeave="ButtonEditPriorityHabitats_MouseLeave"
												ToolTip="Priority Habitats"
												ToolTipService.ShowOnDisabled="True">
											<Image Width="16"
												   Height="16"
												   Source="..\..\Icons\ZoomTable.png" />
										</Button>

                                    </Grid>
                                </GroupBox>

                                <GroupBox x:Name="GroupBoxSecondaryBapHabitats"
                                          Grid.Row="1"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="Potential Priority Habitats">
                                    <Grid x:Name="GridBapHabitatsUser" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <!--  130" />  -->
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="22" />
                                        </Grid.ColumnDefinitions>
                                        <tkit:DataGrid x:Name="DataGridUserBapHabitats"
                                                       Grid.Row="0"
                                                       Grid.Column="0"
                                                       Grid.ColumnSpan="2"
                                                       Margin="4,2,6,2"
                                                       AutoGenerateColumns="False"
                                                       BorderBrush="Black"
                                                       BorderThickness="1"
                                                       CanUserAddRows="True"
                                                       CanUserDeleteRows="True"
                                                       CanUserReorderColumns="False"
                                                       CanUserResizeColumns="True"
                                                       CanUserSortColumns="True"
                                                       HeadersVisibility="All"
                                                       IsEnabled="{Binding BapHabitatsUserEnabled}"
                                                       ItemsSource="{Binding IncidBapHabitatsUser}"
                                                       MinRowHeight="24"
                                                       Padding="2,0"
                                                       RowDetailsVisibilityMode="Visible"
                                                       RowHeaderWidth="20"
                                                       RowHeight="24">
                                            <tkit:DataGrid.RowValidationRules>
                                                <DataErrorValidationRule />
                                            </tkit:DataGrid.RowValidationRules>
                                            <tkit:DataGrid.Columns>
                                                <tkit:DataGridTextColumn Binding="{Binding bap_id}"
                                                                         Header="bap_id"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <tkit:DataGridTextColumn Binding="{Binding incid}"
                                                                         Header="INCID"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <hlu:DataGridComboBoxColumnWithBinding Width="SizeToHeader"
                                                                                       MinWidth="175"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       EditingElementStyle="{DynamicResource ComboBoxStyle}"
                                                                                       Header="Habitat"
                                                                                       IsReadOnly="False"
                                                                                       ItemsSource="{Binding DataContext.BapHabitatCodes,
                                                                                                             IsAsync=true,
                                                                                                             RelativeSource={RelativeSource AncestorType={x:Type Window},
                                                                                                                                            Mode=FindAncestor}}"
                                                                                       SelectedValueBinding="{Binding bap_habitat,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code" />
                                                <hlu:DataGridComboBoxColumnWithBinding Width="SizeToHeader"
                                                                                       MinWidth="100"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       EditingElementStyle="{DynamicResource ComboBoxStyle}"
                                                                                       Header="Determ. Quality"
                                                                                       ItemsSource="{Binding DataContext.BapDeterminationQualityCodesUser,
                                                                                                             IsAsync=true,
                                                                                                             RelativeSource={RelativeSource AncestorType={x:Type Window},
                                                                                                                                            Mode=FindAncestor}}"
                                                                                       SelectedValueBinding="{Binding quality_determination,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code" />
                                                <hlu:DataGridComboBoxColumnWithBinding Width="SizeToHeader"
                                                                                       MinWidth="90"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       EditingElementStyle="{DynamicResource ComboBoxStyle}"
                                                                                       Header="Interp. Quality"
                                                                                       ItemsSource="{Binding DataContext.BapInterpretationQualityCodes,
                                                                                                             IsAsync=true,
                                                                                                             RelativeSource={RelativeSource AncestorType={x:Type Window},
                                                                                                                                            Mode=FindAncestor}}"
                                                                                       SelectedValueBinding="{Binding quality_interpretation,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code" />
                                                <tkit:DataGridTextColumn Width="*"
                                                                         MinWidth="150"
                                                                         Binding="{Binding interpretation_comments,
                                                                                           UpdateSourceTrigger=PropertyChanged,
                                                                                           ValidatesOnDataErrors=True}"
                                                                         CanUserResize="True"
                                                                         EditingElementStyle="{DynamicResource TextBoxStyle}"
                                                                         Header="Interp. Comments" />
                                            </tkit:DataGrid.Columns>
                                            <!--
                                                <tkit:DataGrid.RowDetailsTemplate>
                                                <DataTemplate>
                                                <Grid TextBlock.Foreground="Black">
                                                <Grid.RowDefinitions>
                                                <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <TextBlock Text="{Binding interpretation_comments}" Grid.Row="0"/>
                                                </Grid>
                                                </DataTemplate>
                                                </tkit:DataGrid.RowDetailsTemplate>
                                            -->
                                        </tkit:DataGrid>

										<!--  ButtonEditPriorityHabitats  -->
										<Button x:Name="ButtonEditPotentialHabitats"
												Grid.Row="0"
												Grid.Column="2"
												Width="20"
												MaxHeight="20"
												Margin="0,5,0,0"
												HorizontalAlignment="Right"
												VerticalAlignment="Top"
												Command="{Binding EditPotentialHabitatsCommand}"
												IsEnabled="{Binding CanEditPotentialHabitats}"
												MouseEnter="ButtonEditPotentialHabitats_MouseEnter"
												MouseLeave="ButtonEditPotentialHabitats_MouseLeave"
												ToolTip="Potential Priority Habitats"
												ToolTipService.ShowOnDisabled="True">
											<Image Width="16"
												   Height="16"
												   Source="..\..\Icons\ZoomTable.png" />
										</Button>

                                        <CheckBox x:Name="CheckBoxCopyBapHabitatUser"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidBapHabitatsUser,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding BapHabitatsUserEnabled}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxGeneralComments  -->
                                <GroupBox x:Name="GroupBoxGeneralComments"
                                          Grid.Row="2"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabDetailsControlsEnabled}">
                                    <Grid x:Name="GridGeneralComments" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition MinHeight="50" />
                                            <!--  Height="40"  -->
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="70" />
                                            <!--  130" />  -->
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelGeneralComments"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="2,2,4,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Comments" />
                                        <TextBox x:Name="TextBoxIncidGeneralComments"
                                                 Grid.Row="0"
                                                 Grid.Column="1"
                                                 Grid.ColumnSpan="1"
                                                 MinHeight="52"
                                                 Margin="4,2,8,2"
                                                 BorderThickness="1"
                                                 MaxLength="254"
                                                 Text="{Binding IncidGeneralComments,
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 TextWrapping="Wrap"
                                                 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyGeneralComments"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,2,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidGeneralComments,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxMaps  -->
                                <GroupBox x:Name="GroupBoxMaps"
                                          Grid.Row="3"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="{Binding DetailsMapsHeader}">
                                    <Grid x:Name="GridMaps" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <!-- <RowDefinition Height="Auto" /> -->
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <!--  "130" />  -->
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Grid x:Name="DetailsMaps"
                                              Grid.Row="0"
                                              Grid.Column="0"
                                              Grid.ColumnSpan="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="70" />
                                                <ColumnDefinition Width="*" MinWidth="100" />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" MinWidth="100" />
                                            </Grid.ColumnDefinitions>

                                            <Label x:Name="LabelBoundaryBaseMap"
                                                   Grid.Row="0"
                                                   Grid.Column="0"
                                                   Margin="6,2,4,2"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Boundary" />
                                            <ComboBox x:Name="ComboBoxIncidBoundaryBaseMap"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      Margin="4,2,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding BoundaryMapCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidBoundaryBaseMap,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox x:Name="CheckBoxCopyBoundaryBaseMap"
                                                      Grid.Row="0"
                                                      Grid.Column="2"
                                                      Margin="0,2,0,2"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidBoundaryBaseMap,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />
                                            <Label x:Name="LabelDigitisationBaseMap"
                                                   Grid.Row="0"
                                                   Grid.Column="3"
                                                   Margin="6,2,4,2"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Digitisation" />
                                            <ComboBox x:Name="ComboBoxIncidDigitisationBaseMap"
                                                      Grid.Row="0"
                                                      Grid.Column="4"
                                                      Margin="4,2,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding BoundaryMapCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidDigitisationBaseMap,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                        <CheckBox x:Name="CheckBoxCopyDigitisationBaseMap"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,2,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidDigitisationBaseMap,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxBiosite  -->
                                <GroupBox x:Name="GroupBoxBiosite"
                                          Grid.Row="4"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="{Binding DetailsSiteHeader}">
                                          <!-- VerticalAlignment="Stretch" -->
                                    <Grid x:Name="GridSite" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <!-- <RowDefinition Height="Auto" /> -->
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="70" />
                                            <ColumnDefinition Width="Auto" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="*" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelSiteRef"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="2,2,4,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Site Ref" />
                                        <TextBox x:Name="TextBoxSiteRef"
                                                 Grid.Row="0"
                                                 Grid.Column="1"
                                                 Grid.ColumnSpan="1"
                                                 Width="180"
                                                 Margin="4,2,8,4"
                                                 HorizontalAlignment="Left"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 MaxLength="16"
                                                 Text="{Binding IncidSiteRef,
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSiteRef"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,2,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSiteRef,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelSiteName"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="2,0,4,2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Site Name" />
                                        <TextBox x:Name="TextBoxSiteName"
                                                 Grid.Row="1"
                                                 Grid.Column="1"
                                                 Grid.ColumnSpan="3"
                                                 Margin="4,0,8,2"
                                                 BorderThickness="1"
                                                 MaxLength="100"
                                                 VerticalAlignment="Center"
                                                 Text="{Binding IncidSiteName,
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 TextWrapping="Wrap"
                                                 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSiteName"
                                                  Grid.Row="1"
                                                  Grid.Column="4"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSiteName,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemSources  -->
                <TabItem x:Name="TabItemSources" IsEnabled="{Binding TabItemSourcesEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="SourcesTabLabel"
                                   Margin="2,0,2,0"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding SourcesTabLabel,
                                                     ValidatesOnDataErrors=True}"
                                   FontSize="13"
                                   Padding="4,2,4,4"
                                   Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemSources">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" MinHeight="150" />
                                    <RowDefinition Height="*" MinHeight="150" />
                                    <RowDefinition Height="*" MinHeight="150" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <GroupBox x:Name="GroupBoxSource1"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabSourcesControlsEnabled}"
                                          Header="{Binding Source1Header}">
                                    <Grid x:Name="GridSource1" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="30*" />
                                            <ColumnDefinition Width="50*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox x:Name="LabelIncidSource1Number"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,-4,0,0"
											   FontWeight="Bold"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Text="#1"
											   IsEnabled="False"
					                           IsReadOnly="True"
						       				   Visibility="{Binding ShowSource1Number}" />
                                        <Label x:Name="LabelIncidSource1Name"
                                               Grid.Row="0"
                                               Grid.Column="1"
                                               Margin="4,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Name" />
                                        <ComboBox x:Name="ComboBoxIncidSource1Name"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="source_name"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source1Names,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource1Id,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="source_id"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource1Name"
                                                  Grid.Row="0"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1Id,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1Date"
                                               Grid.Row="1"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Vague Date" />
                                        <TextBox x:Name="TextBoxIncidSource1Date"
                                                 Grid.Row="1"
                                                 Grid.Column="2"
                                                 Margin="8,0,8,4"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 IsEnabled="{Binding IncidSource1Enabled,
                                                                     Mode=OneWay}"
                                                 Text="{Binding IncidSource1Date,
                                                                ConverterParameter=source_date_start^source_date_end^source_date_type,
                                                                Converter={StaticResource vagueDateConverter},
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource1Date"
                                                  Grid.Row="1"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1Date,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1HabitatClass"
                                               Grid.Row="2"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxIncidSource1HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding SourceHabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource1HabitatClass,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource1HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatClass,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1HabitatType"
                                               Grid.Row="3"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />

                                        <ComboBox x:Name="ComboBoxIncidSource1HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source1HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource1HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource1HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatType,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1BoundaryImportance"
                                               Grid.Row="4"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Boundary Imp." />
                                        <Grid x:Name="GridSource1Importance"
                                              Grid.Row="4"
                                              Grid.Column="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>

                                            <ComboBox x:Name="ComboBoxIncidSource1BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="0"
                                                      Margin="8,0,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource1Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      KeyUp="EditableComboBox_KeyUp"
                                                      SelectedValue="{Binding IncidSource1BoundaryImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox x:Name="CheckBoxCopySource1BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      Margin="0,0,0,2"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidSource1BoundaryImportance,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />
                                            <Label x:Name="LabelIncidSource1HabitatImportance"
                                                   Grid.Row="0"
                                                   Grid.Column="2"
                                                   Margin="0,0,0,2"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Habitat Imp." />
                                            <ComboBox x:Name="ComboBoxIncidSource1HabitatImportance"
                                                      Grid.Row="3"
                                                      Grid.Column="3"
                                                      Margin="8,0,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource1Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      KeyUp="EditableComboBox_KeyUp"
                                                      SelectedValue="{Binding IncidSource1HabitatImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                        <CheckBox x:Name="CheckBoxCopySource1HabitatImportance"
                                                  Grid.Row="4"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <GroupBox x:Name="GroupBoxSource2"
                                          Grid.Row="1"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabSourcesControlsEnabled}"
                                          Header="{Binding Source2Header}">
                                    <Grid x:Name="GridSource2" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="30*" />
                                            <ColumnDefinition Width="50*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox x:Name="LabelIncidSource2Number"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,-4,0,0"
											   FontWeight="Bold"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Text="#2"
											   IsEnabled="False"
					                           IsReadOnly="True"
						       				   Visibility="{Binding ShowSource2Number}" />
                                        <Label x:Name="LabelIncidSource2Name"
                                               Grid.Row="0"
                                               Grid.Column="1"
                                               Margin="4,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Name" />
                                        <ComboBox x:Name="ComboBoxIncidSource2Name"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="source_name"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source2Names,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource2Id,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="source_id"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource2Name"
                                                  Grid.Row="0"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2Id,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2Date"
                                               Grid.Row="1"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Vague Date" />
                                        <TextBox x:Name="TextBoxIncidSource2Date"
                                                 Grid.Row="1"
                                                 Grid.Column="2"
                                                 Margin="8,0,8,4"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 IsEnabled="{Binding IncidSource2Enabled,
                                                                     Mode=OneWay}"
                                                 Text="{Binding IncidSource2Date,
                                                                ConverterParameter=source_date_start^source_date_end^source_date_type,
                                                                Converter={StaticResource vagueDateConverter},
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource2Date"
                                                  Grid.Row="1"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2Date,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2HabitatClass"
                                               Grid.Row="2"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxIncidSource2HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding SourceHabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource2HabitatClass,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource2HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatClass,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2HabitatType"
                                               Grid.Row="3"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />

                                        <ComboBox x:Name="ComboBoxIncidSource2HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source2HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource2HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource2HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatType,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2BoundaryImportance"
                                               Grid.Row="4"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Boundary Imp." />
                                        <Grid x:Name="GridSource2Importance"
                                              Grid.Row="4"
                                              Grid.Column="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>

                                            <ComboBox x:Name="ComboBoxIncidSource2BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="0"
                                                      Margin="8,0,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource2Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      KeyUp="EditableComboBox_KeyUp"
                                                      SelectedValue="{Binding IncidSource2BoundaryImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox x:Name="CheckBoxCopySource2BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      Margin="0,0,0,2"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidSource2BoundaryImportance,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />
                                            <Label x:Name="LabelIncidSource2HabitatImportance"
                                                   Grid.Row="0"
                                                   Grid.Column="2"
                                                   Margin="0,0,0,2"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Habitat Imp." />
                                            <ComboBox x:Name="ComboBoxIncidSource2HabitatImportance"
                                                      Grid.Row="3"
                                                      Grid.Column="3"
                                                      Margin="8,0,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource2Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      KeyUp="EditableComboBox_KeyUp"
                                                      SelectedValue="{Binding IncidSource2HabitatImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                        <CheckBox x:Name="CheckBoxCopySource2HabitatImportance"
                                                  Grid.Row="4"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <GroupBox x:Name="GroupBoxSource3"
                                          Grid.Row="2"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabSourcesControlsEnabled}"
                                          Header="{Binding Source3Header}">
                                    <Grid x:Name="GridSource3" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="30*" />
                                            <ColumnDefinition Width="50*" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox x:Name="LabelIncidSource3Number"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,-4,0,0"
											   FontWeight="Bold"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Text="#3"
											   IsEnabled="False"
					                           IsReadOnly="True"
						       				   Visibility="{Binding ShowSource3Number}" />
                                        <Label x:Name="LabelIncidSource3Name"
                                               Grid.Row="0"
                                               Grid.Column="1"
                                               Margin="4,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Name" />
                                        <ComboBox x:Name="ComboBoxIncidSource3Name"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="source_name"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source3Names,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource3Id,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="source_id"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource3Name"
                                                  Grid.Row="0"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3Id,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3Date"
                                               Grid.Row="1"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Vague Date" />
                                        <TextBox x:Name="TextBoxIncidSource3Date"
                                                 Grid.Row="1"
                                                 Grid.Column="2"
                                                 Margin="8,0,8,4"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 IsEnabled="{Binding IncidSource3Enabled,
                                                                     Mode=OneWay}"
                                                 Text="{Binding IncidSource3Date,
                                                                ConverterParameter=source_date_start^source_date_end^source_date_type,
                                                                Converter={StaticResource vagueDateConverter},
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource3Date"
                                                  Grid.Row="1"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3Date,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3HabitatClass"
                                               Grid.Row="2"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxIncidSource3HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource3Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding SourceHabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource3HabitatClass,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource3HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatClass,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3HabitatType"
                                               Grid.Row="3"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />

                                        <ComboBox x:Name="ComboBoxIncidSource3HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="2"
                                                  Margin="8,0,8,4"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource3Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source3HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  KeyUp="EditableComboBox_KeyUp"
                                                  SelectedValue="{Binding IncidSource3HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource3HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatType,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3BoundaryImportance"
                                               Grid.Row="4"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               Margin="0,0,0,2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Boundary Imp." />
                                        <Grid x:Name="GridSource3Importance"
                                              Grid.Row="4"
                                              Grid.Column="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>

                                            <ComboBox x:Name="ComboBoxIncidSource3BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="0"
                                                      Margin="8,0,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource3Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      KeyUp="EditableComboBox_KeyUp"
                                                      SelectedValue="{Binding IncidSource3BoundaryImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox x:Name="CheckBoxCopySource3BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      Margin="0,0,0,2"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidSource3BoundaryImportance,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />

                                            <Label x:Name="LabelIncidSource3HabitatImportance"
                                                   Grid.Row="0"
                                                   Grid.Column="2"
                                                   Margin="0,0,0,2"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Habitat Imp." />
                                            <ComboBox x:Name="ComboBoxIncidSource3HabitatImportance"
                                                      Grid.Row="3"
                                                      Grid.Column="3"
                                                      Margin="8,0,8,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource3Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      KeyUp="EditableComboBox_KeyUp"
                                                      SelectedValue="{Binding IncidSource3HabitatImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                        <CheckBox x:Name="CheckBoxCopySource3HabitatImportance"
                                                  Grid.Row="4"
                                                  Grid.Column="3"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemHistory  -->
                <TabItem x:Name="TabItemHistory" IsEnabled="{Binding TabItemHistoryEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label VerticalAlignment="Bottom"
                                   Content="History"
                                   FontSize="13"
                                   Padding="4,2,4,4" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid x:Name="GridTabItemHistory">
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <!--
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                -->
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox x:Name="GroupBoxModificationHistory"
                                      Grid.Row="0"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3">
                                      <!-- Header="Modification History"> -->
                                <ScrollViewer Margin="0,0,-4,-4" VerticalScrollBarVisibility="Auto">
                                    <ItemsControl x:Name="ItemsControlModificationHistory"
                                                  Grid.Row="0"
                                                  MinHeight="280"
                                                  Margin="0,4,4,4"
                                                  BorderThickness="2"
                                                  Foreground="Black"
                                                  ItemsSource="{Binding IncidHistory,
                                                                        Mode=OneWay,
                                                                        UpdateSourceTrigger=PropertyChanged}">
                                    <!-- <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                                <hlu:UniformGrid2 Orientation="Horizontal" Columns="1" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel> -->
                                    </ItemsControl>
                                </ScrollViewer>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>
            </TabControl>

            <!--  DockPanelGetMapSelection  -->
            <DockPanel x:Name="DockPanelGetMapSelection"
                       Grid.Row="3"
                       Grid.Column="0"
                       MaxHeight="30"
                       Margin="0,4,0,0"
                       VerticalAlignment="Top"
                       Panel.ZIndex="5">
                <Grid x:Name="GridStatusTop">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="LabelStatusTop"
                           Grid.Column="0"
                           Margin="2,7,36,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        <TextBlock x:Name="TextBlockStatusTop" Text="{Binding StatusTop}">
                            <TextBlock.Triggers>
                                <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation AutoReverse="True"
                                                             Duration="0:0:5"
                                                             From="1.0"
                                                             RepeatBehavior="Forever"
                                                             Storyboard.TargetName="TextBlockStatusTop"
                                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                                             To="1.0" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </TextBlock.Triggers>
                        </TextBlock>
                    </Label>
                </Grid>
            </DockPanel>

            <!--  ButtonGetMapSelection2  -->
            <Button x:Name="ButtonGetMapSelection2"
                    Grid.Row="3"
                    Grid.Column="1"
                    Width="20"
                    MaxHeight="20"
                    Margin="0,7,6,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Command="{Binding ReadMapSelectionCommand}"
                    IsEnabled="{Binding CanReadMapSelection}"
                    MouseEnter="ButtonGetMapSelection2_MouseEnter"
                    MouseLeave="ButtonGetMapSelection2_MouseLeave"
                    ToolTip="Get Map Selection"
                    ToolTipService.ShowOnDisabled="True">
                <Image x:Name="Normal"
                       Width="16"
                       Height="16"
                       Source="..\..\Icons\ReadMapSelection.png" />
            </Button>

            <!--  GridNavigation  -->
            <Grid x:Name="GridStatus"
                  Grid.Row="4"
                  Margin="0,4,0,0"
                  IsEnabled="{Binding WindowEnabled}"
				  Visibility="{Binding Path=HideInOSMMUpdateMode}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Grid x:Name="GridBulkUpdate"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding Path=ShowInBulkUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="LabelBulkUpdate"
                           Margin="0,0,4,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Bulk Update Affected:"
                           FontStretch="UltraExpanded"
                           FontWeight="Bold"
                           Style="{DynamicResource LabelReverseStyle}" />
                </Grid>

                <Grid x:Name="GridNavigation"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding Path=HideInBulkUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="40" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="25" />
                        <ColumnDefinition Width="25" />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="LabelNavigation"
                           Grid.Column="0"
                           Margin="0,0,4,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="INCID:"
                           Style="{DynamicResource LabelReverseStyle}" />
                    <Button x:Name="ButtonFirstRecord"
                            Grid.Column="1"
                            Margin="0,0,1,0"
                            Command="{Binding Path=NavigateFirstCommand}">
                        |&lt;
                    </Button>
                    <Button Name="ButtonPreviousRecord"
                            Grid.Column="2"
                            Margin="0,0,1,0"
                            Command="{Binding Path=NavigatePreviousCommand}">
                        &lt;
                    </Button>
                    <TextBox Name="TextBoxRecordNumber"
                             Grid.Column="3"
                             Text="{Binding IncidCurrentRowIndex,
                                            Mode=TwoWay,
                                            ValidatesOnDataErrors=True}"
                             Tag="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent, Mode=OneWay, Converter={StaticResource errorMessageConverter}}"
                             TextAlignment="Center" />
                    <Button x:Name="ButtonNextRecord"
                            Grid.Column="4"
                            Margin="1,0,0,0"
                            Command="{Binding Path=NavigateNextCommand}">
                        &gt;
                    </Button>
                    <Button Name="ButtonLastRecord"
                            Grid.Column="5"
                            Margin="1,0,0,0"
                            Command="{Binding Path=NavigateLastCommand}">
                        &gt;|
                    </Button>
                </Grid>

                <Grid x:Name="GridLabelStatusIncid"
                      Grid.Column="1"
                      Height="23"
                      VerticalAlignment="Bottom">
                    <Label x:Name="LabelStatusIncid"
                           Grid.Column="0"
                           Margin="4,0,4,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           Content="{Binding StatusIncid,
                                             UpdateSourceTrigger=PropertyChanged}"
                           MouseDoubleClick="LabelStatusIncid_MouseDoubleClick"
                           Style="{DynamicResource LabelReverseStyle}"
                           ToolTip="{Binding StatusIncidToolTip,
                                             UpdateSourceTrigger=PropertyChanged}" />
                </Grid>

                <Grid x:Name="GridCommandButtons"
                      Grid.Column="2"
                      Height="23"
                      HorizontalAlignment="Right"
                      VerticalAlignment="Bottom">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="60" />
                    </Grid.ColumnDefinitions>

                    <Button x:Name="ButtonCancelBulkUpdate"
                            Grid.Column="1"
                            Margin="2,0,2,0"
                            Command="{Binding Path=CancelBulkUpdateCommand}"
                            Visibility="{Binding Path=ShowInBulkUpdateMode}">
                        _Cancel
                    </Button>
                    <Button x:Name="ButtonUpdate"
                            Grid.Column="2"
                            Margin="2,0,0,0"
                            Background="Red"
                            Command="{Binding UpdateCommand}"
                            Content="Appl_y"
                            Foreground="White"
                            IsEnabled="{Binding CanUpdate}" />
                </Grid>
            </Grid>

            <!--  GridStatusOSMM  -->
            <Grid x:Name="GridStatusOSMM"
                  Grid.Row="4"
                  Margin="0,4,0,0"
				  Visibility="{Binding Path=ShowInOSMMUpdateMode}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Grid x:Name="GridOSMMNavigation"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding HideInBulkUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="40" />
                        <ColumnDefinition Width="60" />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="LabelOSMMNavigation"
                           Grid.Column="0"
                           Margin="0,0,4,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="INCID:"
                           Style="{DynamicResource LabelReverseStyle}" />
                    <TextBox x:Name="TextBoxOSMMRecordNumber"
                             Grid.Column="1"
                             Margin="2,0,0,0"
                             IsReadOnly="True"
                             TextAlignment="Center"
                             Text="{Binding OSMMIncidCurrentRowIndex,
                                            Mode=OneWay}"
							  />
                </Grid>

                <Grid x:Name="GridOSMMLabelStatusIncid"
                      Grid.Column="1"
                      Height="23"
                      VerticalAlignment="Bottom">
                    <Label x:Name="LabelOSMMStatusIncid"
                           Grid.Column="0"
                           Margin="8,0,4,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           Content="{Binding StatusIncid,
                                             UpdateSourceTrigger=PropertyChanged}"
                           MouseDoubleClick="LabelStatusIncid_MouseDoubleClick"
                           Style="{DynamicResource LabelReverseStyle}"
                           ToolTip="{Binding StatusIncidToolTip,
                                             UpdateSourceTrigger=PropertyChanged}" />
                </Grid>

                <Grid x:Name="GridOSMMCommandButtons"
                      Grid.Column="2"
                      Height="23"
                      HorizontalAlignment="Right"
                      VerticalAlignment="Bottom">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="70" />
                        <ColumnDefinition Width="70" />
                        <ColumnDefinition Width="70" />
                    </Grid.ColumnDefinitions>
                    <Button x:Name="ButtonOSMMSkip"
                            Grid.Column="0"
                            Margin="2,0,0,0"
                            Background="#FF939393"
                            Command="{Binding OSMMSkipCommand}"
                            Content="_Skip"
                            Foreground="White"
                            IsEnabled="{Binding CanOSMMSkip, UpdateSourceTrigger=PropertyChanged}" />
                    <Button x:Name="ButtonOSMMReject"
                            Grid.Column="1"
                            Margin="2,0,0,0"
                            Background="DarkOrange"
                            Command="{Binding OSMMRejectCommand}"
                            Content="{Binding OSMMRejectText}"
                            Foreground="White"
                            IsEnabled="{Binding CanOSMMAccept}"
	                        ToolTip="Hold down 'Ctrl' key to reject all remaining records in filter"
		                    ToolTipService.ShowOnDisabled="True"
							Tag="{Binding OSMMRejectTag,
                                          Mode=TwoWay,
							              UpdateSourceTrigger=PropertyChanged}" />
                    <Button x:Name="ButtonOSMMAccept"
                            Grid.Column="2"
                            Margin="2,0,0,0"
                            Background="DarkGreen"
                            Command="{Binding OSMMAcceptCommand}"
                            Content="{Binding OSMMAcceptText}"
                            Foreground="White"
                            IsEnabled="{Binding CanOSMMAccept}"
	                        ToolTip="Hold down 'Ctrl' key to accept all remaining records in filter"
		                    ToolTipService.ShowOnDisabled="True"
							Tag="{Binding OSMMAcceptTag,
                                          Mode=TwoWay,
							              UpdateSourceTrigger=PropertyChanged}" />
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
